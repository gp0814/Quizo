module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},70106,a=>{"use strict";var b=a.i(72131),c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(a,d)=>{let e=(0,b.forwardRef)(({color:e="currentColor",size:f=24,strokeWidth:g=2,absoluteStrokeWidth:h,children:i,...j},k)=>(0,b.createElement)("svg",{ref:k,...c,width:f,height:f,stroke:e,strokeWidth:h?24*Number(g)/Number(f):g,className:`lucide lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...j},[...d.map(([a,c])=>(0,b.createElement)(a,c)),...(Array.isArray(i)?i:[i])||[]]));return e.displayName=`${a}`,e};a.s(["default",()=>d],70106)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},13513,a=>{"use strict";let b=(0,a.i(70106).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);a.s(["Camera",()=>b],13513)},2471,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(96438),f=a.i(83490);let g=(0,a.i(70106).default)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var h=a.i(13513),i=a.i(41710);function j({params:a}){let j,k,l=(0,d.useRouter)(),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(0),[y,z]=(0,c.useState)({}),A=(0,c.useRef)(null);(0,c.useEffect)(()=>{B()},[]),(0,c.useEffect)(()=>{if(!q)return;let a=setInterval(()=>{x(a=>a<=1?(E(),0):a-1)},1e3),b=()=>{document.hidden&&D("Tab switching detected!")},c=()=>{document.fullscreenElement?v(!0):(v(!1),D("Exited fullscreen mode!"))};return document.addEventListener("visibilitychange",b),document.addEventListener("fullscreenchange",c),()=>{clearInterval(a),document.removeEventListener("visibilitychange",b),document.removeEventListener("fullscreenchange",c)}},[q]);let B=async()=>{try{let b=await f.default.get(`/api/tests/${a.id}/start`);p(b.data.test),x(60*b.data.test.duration)}catch(a){a.response?.status===403?(alert(a.response.data.error),l.push("/student/dashboard")):console.error(a)}finally{n(!1)}},C=async()=>{try{if(o.settings.requireCamera)try{let a=await navigator.mediaDevices.getUserMedia({video:!0});A.current&&(A.current.srcObject=a)}catch(a){alert("Camera permission is required to start this test.");return}await document.documentElement.requestFullscreen(),r(!0)}catch(a){alert("Fullscreen is required to start.")}},D=a=>{t(b=>{let c=b+1;return c>=3?(alert(`Test Auto-Submitted due to multiple violations: ${a}`),E()):alert(`Warning ${c}/3: ${a}`),c})},E=async()=>{A.current&&A.current.srcObject&&A.current.srcObject.getTracks().forEach(a=>a.stop());try{let b=Object.entries(y).map(([a,b])=>({index:parseInt(a),value:b}));await f.default.post(`/api/tests/${a.id}/submit`,{answers:b}),document.fullscreenElement&&document.exitFullscreen(),l.push("/student/dashboard"),alert("Test Submitted Successfully!")}catch(a){alert("Failed to submit, trying again...")}};return m?(0,b.jsx)("div",{children:"Loading..."}):o?q?(0,b.jsxs)("div",{className:"min-h-screen flex flex-col bg-white dark:bg-gray-950",children:[(0,b.jsxs)("div",{className:"h-16 border-b flex items-center justify-between px-6 bg-gray-900 text-white sticky top-0 z-50",children:[(0,b.jsx)("div",{className:"font-bold text-lg",children:o.title}),(0,b.jsx)("div",{className:`p-2 rounded-lg font-mono text-xl font-bold tracking-widest ${w<60?"bg-red-600 animate-pulse":"bg-gray-800"}`,children:(j=Math.floor(w/60),k=w%60,`${j}:${k<10?"0":""}${k}`)}),(0,b.jsx)(e.Button,{variant:"danger",className:"text-sm py-2 px-3",onClick:()=>{confirm("Finish test?")&&E()},children:"Finish Test"})]}),(0,b.jsxs)("div",{className:"flex flex-1 overflow-hidden relative",children:[(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-8 pb-32",children:(0,b.jsx)("div",{className:"max-w-4xl mx-auto space-y-12",children:o.questions.map((a,c)=>(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"text-xl font-medium flex gap-3",children:[(0,b.jsxs)("span",{className:"text-gray-400 font-bold",children:[c+1,"."]}),a.questionText]}),(0,b.jsx)("div",{className:"space-y-3 pl-8",children:a.options.map((a,d)=>(0,b.jsxs)("label",{className:`block p-4 rounded-xl border-2 cursor-pointer transition-all ${y[c]===a?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-100 hover:border-gray-200 dark:border-gray-800"}`,children:[(0,b.jsx)("input",{type:"radio",name:`q-${c}`,className:"hidden",checked:y[c]===a,onChange:()=>z({...y,[c]:a})}),(0,b.jsx)("span",{className:"font-medium",children:a})]},d))})]},c))})}),(0,b.jsxs)("div",{className:"w-64 bg-gray-100 dark:bg-gray-900 border-l p-4 flex flex-col gap-4",children:[o.settings.requireCamera&&(0,b.jsxs)("div",{className:"aspect-video bg-black rounded-xl overflow-hidden shadow-lg border-2 border-red-500 relative",children:[(0,b.jsx)("video",{ref:A,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),(0,b.jsxs)("div",{className:"absolute top-2 left-2 flex items-center gap-1 bg-red-600 text-white text-[10px] px-2 py-0.5 rounded-full animate-pulse",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})," LIVE"]})]}),(0,b.jsxs)("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:"Proctor Status"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-600 font-medium text-sm",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})," Monitoring Active"]}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Warnings"}),(0,b.jsx)("div",{className:"flex gap-1",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:`h-2 flex-1 rounded-full ${a<=s?"bg-red-500":"bg-gray-200"}`},a))})]})]})]})]})]}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center p-6",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-900 max-w-2xl w-full rounded-3xl p-8 shadow-2xl space-y-8 text-center border overflow-hidden relative",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 to-purple-500"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:o.title}),(0,b.jsxs)("p",{className:"text-gray-500",children:[o.department," | ",o.semester," Sem"]}),(0,b.jsxs)("div",{className:"inline-flex gap-4 bg-gray-100 dark:bg-gray-800 p-3 rounded-xl text-sm font-medium",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Clock,{size:16})," ",o.duration," mins"]}),(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Camera,{size:16})," ",o.settings.requireCamera?"Camera On":"No Camera"]})]})]}),(0,b.jsxs)("div",{className:"text-left bg-blue-50 dark:bg-blue-900/20 p-6 rounded-2xl border border-blue-100 dark:border-blue-800",children:[(0,b.jsxs)("h3",{className:"font-bold text-blue-800 dark:text-blue-300 mb-3 flex items-center gap-2",children:[(0,b.jsx)(g,{size:18})," Important Rules"]}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-sm text-blue-900 dark:text-blue-200",children:[(0,b.jsxs)("li",{children:["The test will be in ",(0,b.jsx)("strong",{children:"Fullscreen Mode"}),". Exiting it will trigger a warning."]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("strong",{children:"Tab Switching"})," is monitored. 3 warnings triggers Auto Submit."]}),o.settings.requireCamera&&(0,b.jsxs)("li",{children:[(0,b.jsx)("strong",{children:"Camera"})," must be active throughout the session."]}),(0,b.jsx)("li",{children:"Do not reload the page."})]})]}),(0,b.jsx)(e.Button,{onClick:C,className:"w-full h-14 text-lg shadow-xl shadow-blue-500/30",children:"I Agree & Start Test"})]})}):(0,b.jsx)("div",{children:"Test not found"})}a.s(["default",()=>j],2471)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__1e72106b._.js.map
{"version":3,"sources":["../../../src/models/User.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from 'mongoose';\r\n\r\nexport interface IUser extends Document {\r\n    name: string;\r\n    email: string;\r\n    password?: string;\r\n    role: 'student' | 'teacher';\r\n    department: string;\r\n    // Student only fields\r\n    usn?: string;\r\n    semester?: string;\r\n    // Profile\r\n    profilePicture?: string;\r\n    createdAt: Date;\r\n    updatedAt: Date;\r\n}\r\n\r\nconst UserSchema: Schema<IUser> = new Schema(\r\n    {\r\n        name: { type: String, required: true },\r\n        email: { type: String, required: true, unique: true },\r\n        password: { type: String, required: true },\r\n        role: { type: String, enum: ['student', 'teacher'], required: true },\r\n        department: { type: String, required: true },\r\n        // Student specific\r\n        usn: {\r\n            type: String,\r\n            required: function (this: IUser) { return this.role === 'student'; },\r\n            unique: true,\r\n            sparse: true // sparse allows null/undefined to not conflict uniqueness\r\n        },\r\n        semester: {\r\n            type: String,\r\n            required: function (this: IUser) { return this.role === 'student'; }\r\n        },\r\n        profilePicture: { type: String },\r\n    },\r\n    { timestamps: true }\r\n);\r\n\r\n// Prevent overwrite on HMR\r\nconst User: Model<IUser> = mongoose.models.User || mongoose.model<IUser>('User', UserSchema);\r\n\r\nexport default User;\r\n"],"names":[],"mappings":"4qCAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAiBA,IAAM,EAA4B,IAAI,EAAA,MAAM,CACxC,CACI,KAAM,CAAE,KAAM,OAAQ,UAAU,CAAK,EACrC,MAAO,CAAE,KAAM,OAAQ,UAAU,EAAM,QAAQ,CAAK,EACpD,SAAU,CAAE,KAAM,OAAQ,UAAU,CAAK,EACzC,KAAM,CAAE,KAAM,OAAQ,KAAM,CAAC,UAAW,UAAU,CAAE,UAAU,CAAK,EACnE,WAAY,CAAE,KAAM,OAAQ,UAAU,CAAK,EAE3C,IAAK,CACD,KAAM,OACN,SAAU,WAAyB,MAAqB,YAAd,IAAI,CAAC,IAAI,AAAgB,EACnE,OAAQ,GACR,QAAQ,CACZ,EACA,EAFiB,OAEP,CACN,KAAM,OACN,SAAU,WAAyB,MAAqB,YAJe,AAI7B,IAAI,CAAC,IAAI,AAAgB,CACvE,EACA,eAAgB,CAAE,KAAM,MAAO,CACnC,EACA,CAAE,YAAY,CAAK,GAIjB,EAAqB,EAAA,OAAQ,CAAC,MAAM,CAAC,IAAI,EAAI,EAAA,OAAQ,CAAC,KAAK,CAAQ,OAAQ,oBAElE"}
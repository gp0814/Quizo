(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},75254,e=>{"use strict";var t=e.i(71645),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=(e,r)=>{let a=(0,t.forwardRef)(({color:a="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:n,children:d,...c},o)=>(0,t.createElement)("svg",{ref:o,...s,width:l,height:l,stroke:a,strokeWidth:n?24*Number(i)/Number(l):i,className:`lucide lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...c},[...r.map(([e,s])=>(0,t.createElement)(e,s)),...(Array.isArray(d)?d:[d])||[]]));return a.displayName=`${e}`,a};e.s(["default",()=>r],75254)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},68553,e=>{"use strict";let t=(0,e.i(75254).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["Camera",()=>t],68553)},45371,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(59544),l=e.i(81949);let i=(0,e.i(75254).default)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var n=e.i(68553),d=e.i(3116);function c({params:e}){let c,o,u=(0,r.useRouter)(),[m,x]=(0,s.useState)(!0),[h,g]=(0,s.useState)(null),[b,p]=(0,s.useState)(!1),[f,v]=(0,s.useState)(0),[j,y]=(0,s.useState)(!1),[w,N]=(0,s.useState)(0),[k,C]=(0,s.useState)({}),S=(0,s.useRef)(null);(0,s.useEffect)(()=>{$()},[]),(0,s.useEffect)(()=>{if(!b)return;let e=setInterval(()=>{N(e=>e<=1?(q(),0):e-1)},1e3),t=()=>{document.hidden&&T("Tab switching detected!")},s=()=>{document.fullscreenElement?y(!0):(y(!1),T("Exited fullscreen mode!"))};return document.addEventListener("visibilitychange",t),document.addEventListener("fullscreenchange",s),()=>{clearInterval(e),document.removeEventListener("visibilitychange",t),document.removeEventListener("fullscreenchange",s)}},[b]);let $=async()=>{try{let t=await l.default.get(`/api/tests/${e.id}/start`);g(t.data.test),N(60*t.data.test.duration)}catch(e){e.response?.status===403?(alert(e.response.data.error),u.push("/student/dashboard")):console.error(e)}finally{x(!1)}},E=async()=>{try{if(h.settings.requireCamera)try{let e=await navigator.mediaDevices.getUserMedia({video:!0});S.current&&(S.current.srcObject=e)}catch(e){alert("Camera permission is required to start this test.");return}await document.documentElement.requestFullscreen(),p(!0)}catch(e){alert("Fullscreen is required to start.")}},T=e=>{v(t=>{let s=t+1;return s>=3?(alert(`Test Auto-Submitted due to multiple violations: ${e}`),q()):alert(`Warning ${s}/3: ${e}`),s})},q=async()=>{S.current&&S.current.srcObject&&S.current.srcObject.getTracks().forEach(e=>e.stop());try{let t=Object.entries(k).map(([e,t])=>({index:parseInt(e),value:t}));await l.default.post(`/api/tests/${e.id}/submit`,{answers:t}),document.fullscreenElement&&document.exitFullscreen(),u.push("/student/dashboard"),alert("Test Submitted Successfully!")}catch(e){alert("Failed to submit, trying again...")}};return m?(0,t.jsx)("div",{children:"Loading..."}):h?b?(0,t.jsxs)("div",{className:"min-h-screen flex flex-col bg-white dark:bg-gray-950",children:[(0,t.jsxs)("div",{className:"h-16 border-b flex items-center justify-between px-6 bg-gray-900 text-white sticky top-0 z-50",children:[(0,t.jsx)("div",{className:"font-bold text-lg",children:h.title}),(0,t.jsx)("div",{className:`p-2 rounded-lg font-mono text-xl font-bold tracking-widest ${w<60?"bg-red-600 animate-pulse":"bg-gray-800"}`,children:(c=Math.floor(w/60),o=w%60,`${c}:${o<10?"0":""}${o}`)}),(0,t.jsx)(a.Button,{variant:"danger",className:"text-sm py-2 px-3",onClick:()=>{confirm("Finish test?")&&q()},children:"Finish Test"})]}),(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden relative",children:[(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-8 pb-32",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto space-y-12",children:h.questions.map((e,s)=>(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-xl font-medium flex gap-3",children:[(0,t.jsxs)("span",{className:"text-gray-400 font-bold",children:[s+1,"."]}),e.questionText]}),(0,t.jsx)("div",{className:"space-y-3 pl-8",children:e.options.map((e,r)=>(0,t.jsxs)("label",{className:`block p-4 rounded-xl border-2 cursor-pointer transition-all ${k[s]===e?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-100 hover:border-gray-200 dark:border-gray-800"}`,children:[(0,t.jsx)("input",{type:"radio",name:`q-${s}`,className:"hidden",checked:k[s]===e,onChange:()=>C({...k,[s]:e})}),(0,t.jsx)("span",{className:"font-medium",children:e})]},r))})]},s))})}),(0,t.jsxs)("div",{className:"w-64 bg-gray-100 dark:bg-gray-900 border-l p-4 flex flex-col gap-4",children:[h.settings.requireCamera&&(0,t.jsxs)("div",{className:"aspect-video bg-black rounded-xl overflow-hidden shadow-lg border-2 border-red-500 relative",children:[(0,t.jsx)("video",{ref:S,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),(0,t.jsxs)("div",{className:"absolute top-2 left-2 flex items-center gap-1 bg-red-600 text-white text-[10px] px-2 py-0.5 rounded-full animate-pulse",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})," LIVE"]})]}),(0,t.jsxs)("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:"Proctor Status"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600 font-medium text-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})," Monitoring Active"]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Warnings"}),(0,t.jsx)("div",{className:"flex gap-1",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:`h-2 flex-1 rounded-full ${e<=f?"bg-red-500":"bg-gray-200"}`},e))})]})]})]})]})]}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center p-6",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-900 max-w-2xl w-full rounded-3xl p-8 shadow-2xl space-y-8 text-center border overflow-hidden relative",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 to-purple-500"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:h.title}),(0,t.jsxs)("p",{className:"text-gray-500",children:[h.department," | ",h.semester," Sem"]}),(0,t.jsxs)("div",{className:"inline-flex gap-4 bg-gray-100 dark:bg-gray-800 p-3 rounded-xl text-sm font-medium",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Clock,{size:16})," ",h.duration," mins"]}),(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Camera,{size:16})," ",h.settings.requireCamera?"Camera On":"No Camera"]})]})]}),(0,t.jsxs)("div",{className:"text-left bg-blue-50 dark:bg-blue-900/20 p-6 rounded-2xl border border-blue-100 dark:border-blue-800",children:[(0,t.jsxs)("h3",{className:"font-bold text-blue-800 dark:text-blue-300 mb-3 flex items-center gap-2",children:[(0,t.jsx)(i,{size:18})," Important Rules"]}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-sm text-blue-900 dark:text-blue-200",children:[(0,t.jsxs)("li",{children:["The test will be in ",(0,t.jsx)("strong",{children:"Fullscreen Mode"}),". Exiting it will trigger a warning."]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Tab Switching"})," is monitored. 3 warnings triggers Auto Submit."]}),h.settings.requireCamera&&(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Camera"})," must be active throughout the session."]}),(0,t.jsx)("li",{children:"Do not reload the page."})]})]}),(0,t.jsx)(a.Button,{onClick:E,className:"w-full h-14 text-lg shadow-xl shadow-blue-500/30",children:"I Agree & Start Test"})]})}):(0,t.jsx)("div",{children:"Test not found"})}e.s(["default",()=>c],45371)}]);